{% extends "main/base.html" %}


{% block title %}All Articles{% endblock %}

{% block content %}
  <h1>All articles</h1>

  <br><br>

  {% for article in articles %}
  
      <div class="card" id="article-{{ article.id }}">
        <div class="card-header">
          By {{ article.author }}
        </div>
        <div class="card-body">
          <h5 class="card-title">{{ article.title }}</h5>
          <p class="card-text">{{ article.content }}</p>
          <a href="{% url 'article_detail' article.id %}" class="btn btn-primary">Read More</a>
          <a href="{% url 'update_article' article.id %}" class="btn btn-primary">Update</a>
          <button onclick="deleteArticle({{ article.id }})" class="btn btn-danger">Delete</button>
          <!-- Fallback form for non-JavaScript users -->
          <form method="post" action="{% url 'delete_article' article.id %}" style="display: inline;" class="delete-form-fallback">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this article?')" style="display: none;">Delete (Fallback)</button>
          </form>
        </div>
      </div>

      <br/><br/>
  {% endfor %}

  {% endblock %}

{% block extra_js %}
  {% load static %}
  <script src="{% static 'js/all_articles.js' %}"></script>

{% endblock %}