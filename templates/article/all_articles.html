{% extends "main/base.html" %}


{% block title %}All Articles{% endblock %}

{% block content %}
  <h1>All articles</h1>

  <br><br>

  <div class="table-responsive">
    <table class="table table-striped table-hover table-bordered">
        {% for article in articles %}
        <tr id="article-{{ article.id }}">
          <td><a href="{% url 'article_detail' article.id %}">{{ article.title }}</a></td>
          <td align="right">
            <a href="{% url 'article_detail' article.id %}" class="btn btn-primary btn-sm">Read More</a>
            <a href="{% url 'update_article' article.id %}" class="btn btn-secondary btn-sm">Update</a>
            <button onclick="deleteArticle({{ article.id }})" class="btn btn-danger btn-sm">Delete</button>
            <!-- Fallback form for non-JavaScript users -->
            <form method="post" action="{% url 'delete_article' article.id %}" style="display: inline;" class="delete-form-fallback">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this article?')" style="display: none;">Delete (Fallback)</button>
            </form>
          </td>
        </tr>
        {% endfor %}
    </table>
  </div>

  {% endblock %}

{% block extra_js %}
  {% load static %}
  <script src="{% static 'js/all_articles.js' %}"></script>

{% endblock %}